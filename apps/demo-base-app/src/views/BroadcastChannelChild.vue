<template>
  <h1>è·¨é¡µç­¾ BroadcastChannel å­é¡µç­¾</h1>
  <div class="body">
    <div class="card">
      <div class="card_body">
        <button @click="onCountClick">ç‚¹å‡»count++</button>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';
import { channelEmitter } from '../utils/channelEmitter';

const count = ref(0);

function onCountClick() {
  channelEmitter
    .emit('setCount', count.value)
    .then(res => {
      count.value = res + 1;
    })
    .catch(err => {
      console.log('ğŸš€ ~ BroadcastChannelChild.vue:20 ~ onCountClick ~ err:', err);
    });
}
</script>

<style scoped>
.body {
  display: flex;
  flex-direction: column;
  gap: 12px;
}
</style>
